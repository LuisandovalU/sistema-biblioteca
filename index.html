<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Gestión Bibliotecaria</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <header class="header">
        <div class="container">
            <h1>Sistema de Gestión Bibliotecaria</h1>
            <p style="opacity: 0.9; font-size: 14px; letter-spacing: 1px;">INSTITUTO POLITÉCNICO NACIONAL</p>
        </div>
    </header>

    <div class="container">
        <div class="tabs">
            <button class="tab-btn active" data-tab="registro">Registro de Libros</button>
            <button class="tab-btn" data-tab="inventario">Inventario General</button>
            <button class="tab-btn" data-tab="prestamos">Gestión de Préstamos</button>
        </div>

        <div id="registro" class="tab-content active">
            <div class="card">
                <h2>Alta de Nuevo Material</h2>
                <form id="formRegistroLibro">
                    <div class="form-group">
                        <label>Título de libro</label>
                        <input type="text" id="tituloRegistro" required placeholder="Ingrese el título completo">
                    </div>
                    <div class="form-group">
                        <label>Autor(es)</label>
                        <input type="text" id="autorRegistro" required placeholder="Nombre del autor">
                    </div>
                    <div class="form-group">
                        <label>Editorial</label>
                        <input type="text" id="editorialRegistro" required>
                    </div>
                    <div class="form-group">
                        <label>Categoría</label>
                        <select id="categoriaRegistro" required>
                            <option value="">Seleccione una categoría...</option>
                            <option value="Ciencias Básicas">Ciencias Básicas</option>
                            <option value="Ingeniería">Ingeniería</option>
                            <option value="Ciencias Sociales">Ciencias Sociales</option>
                            <option value="Humanidades">Humanidades</option>
                            <option value="Literatura">Literatura</option>
                            <option value="General">General</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Año de Publicación</label>
                        <input type="number" id="anioRegistro" min="1900" max="2025" required>
                    </div>
                    <button type="submit" class="btn btn-primary btn-block">Registrar en Catálogo</button>
                </form>
            </div>

            <div class="card">
                <div class="card-header">
                    <h2>Últimos Registros</h2>
                    <div class="actions">
                        <button onclick="exportarRegistros()" class="btn btn-export">Exportar</button>
                        <label class="btn btn-import">
                            Importar
                            <input type="file" id="importarRegistros" accept=".txt" style="display:none">
                        </label>
                    </div>
                </div>
                <div id="listaRegistros"></div>
            </div>
        </div>

        <div id="inventario" class="tab-content">
            <div class="card">
                <div class="card-header">
                    <h2>Catálogo Completo (Total: <span id="totalInventario">0</span>)</h2>
                    <div class="actions">
                        <button onclick="ordenarPorTitulo()" class="btn btn-primary">AZ Ordenar por Título</button>
                        <button onclick="exportarInventario()" class="btn btn-export">Exportar</button>
                        <label class="btn btn-import">
                            Importar
                            <input type="file" id="importarInventario" accept=".txt" style="display:none">
                        </label>
                    </div>
                </div>
                <div class="form-group">
                    <input type="text" id="buscarInventario"
                        placeholder="Buscar por título, autor o número de adquisición...">
                </div>
                <div id="listaInventario"></div>
            </div>
        </div>

        <div id="prestamos" class="tab-content">
            <div class="card">
                <h2>Asignación de Préstamo</h2>
                <form id="formPrestamo">
                    <div class="form-group">
                        <label>Libro a prestar</label>
                        <select id="libroSelectPrestamo" required>
                            <option value="">Seleccione un libro disponible...</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Nombre del Solicitante</label>
                        <input type="text" id="nombreUsuario" required placeholder="Nombre del alumno o docente">
                    </div>
                    <div class="form-group">
                        <label>Duración del préstamo (días)</label>
                        <input type="number" id="diasPrestamo" value="7" min="1" max="30" required>
                    </div>
                    <div class="form-group">
                        <label>Cuota de recuperación (opcional)</label>
                        <input type="number" id="cuotaInicial" value="0" min="0" step="0.01">
                        <small>Dejar en 0 si no aplica.</small>
                    </div>
                    <button type="submit" class="btn btn-primary btn-block">Registrar Salida</button>
                </form>
            </div>

            <div class="card">
                <div class="card-header">
                    <h2>Préstamos Activos (Total: <span id="totalPrestamos">0</span>)</h2>
                    <div class="actions">
                        <button onclick="exportarPrestamos()" class="btn btn-export">Exportar</button>
                        <label class="btn btn-import">
                            Importar
                            <input type="file" id="importarPrestamos" accept=".txt" style="display:none">
                        </label>
                    </div>
                </div>
                <div id="listaPrestamos"></div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h2>Historial de Devoluciones</h2>
                    <button onclick="limpiarHistorial()" class="btn btn-danger">Borrar Historial</button>
                </div>
                <div id="listaHistorial"></div>
            </div>
        </div>
    </div>

    <div id="modalEditar" class="modal">
        <div class="modal-content">
            <span class="close" onclick="cerrarModal()">&times;</span>
            <h2>Editar Información del Libro</h2>
            <form id="formEditarLibro">
                <input type="hidden" id="editarId">
                <div class="form-group">
                    <label>Número de Adquisición</label>
                    <input type="text" id="editarNumero" disabled style="background-color: #f0f0f0;">
                </div>
                <div class="form-group">
                    <label>Título</label>
                    <input type="text" id="editarTitulo" required>
                </div>
                <div class="form-group">
                    <label>Autor</label>
                    <input type="text" id="editarAutor" required>
                </div>
                <div class="form-group">
                    <label>Editorial</label>
                    <input type="text" id="editarEditorial" required>
                </div>
                <div class="form-group">
                    <label>Categoría</label>
                    <select id="editarCategoria" required>
                        <option value="Ciencias Básicas">Ciencias Básicas</option>
                        <option value="Ingeniería">Ingeniería</option>
                        <option value="Ciencias Sociales">Ciencias Sociales</option>
                        <option value="Humanidades">Humanidades</option>
                        <option value="Literatura">Literatura</option>
                        <option value="General">General</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Año</label>
                    <input type="number" id="editarAnio" required>
                </div>
                <button type="submit" class="btn btn-primary btn-block">Guardar Cambios</button>
            </form>
        </div>
    </div>

    <div id="toast" class="toast"></div>
    <script src="script.js"></script>
</body>

</html>